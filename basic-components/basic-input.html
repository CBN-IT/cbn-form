<!--
`cbn-basic-input` implements a basic text input.

@group cbn-form
@element input-text
-->

<!-- Imports -->
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../cbn-form-abstract.html">
<link rel="import" href="../cbn-form-validator.html">

<style shim-shadowdom>
	html /deep/ input[is=cbn-basic-input] {
		display: inline-block;
		box-sizing: border-box;
		margin: 0;
		padding: 0.3em;
		
		font: inherit;
		background-color: transparent;
		box-shadow: none;
		outline: none;
		border: solid 1px #dcdcdc;
		transition: box-shadow 0.3s, border 0.3s;
	}
	html /deep/ input[is=cbn-basic-input]:focus {
		outline: none;
		border: solid 1px #707070;
		box-shadow: 0 0 5px 1px #969696;
	}
	
	/*noinspection CssUnusedSymbol*/
	html /deep/ input[is=cbn-basic-input].unstyled {
		margin: 0;
		padding: 0;
		border: 0;
		transition: none;
		box-shadow: none;
	}
</style>

<polymer-element name="cbn-basic-input" extends="input">
	
	<script>
		Polymer('cbn-basic-input', Polymer.implementBehaviors({
			
			publish: { // Published attributes:
				
				/**
				 * Whether the input is in a preview state.
				 * 
				 * @attribute previewstate
				 * @type {Boolean}
				 */
				previewState: false,
				
				/**
				 * The default value is the empty string.
				 */
				defaultValue: ''
				
			},
			
			/**
			 * Element's dynamically-configurable attributes.
			 */
			dynamicAttributes: {
				"title" : { type: 'attribute' }, 
				"placeholder" : { type: 'attribute' },
				"autocomplete": { type: 'attribute' },
				"autofocus": { type: 'attribute' },
				"disabled"	: { type: 'attribute' },
				"readonly": { type: 'attribute' }
			},
			
			/**
			 * Initializes the input's default validation / behavior.
			 */
			created: function() {
				if (!this.validation)
					this.validation = {};
				if (this.type == 'email' || this.type == 'number') {
					if (this.validation.hasOwnProperty(this.type)) {
						this.validation[this.type] = true;
					}
				}
			}
			
		}, CbnForm.AbstractInput, CbnForm.ValidatableInput, CbnForm.DynamicControl));
		
		//noinspection JSCheckFunctionSignatures
		CbnForm.registerElement('cbn-basic-input', {
				extends: 'input', 
				types: ['text', 'password', 'email', 'number']
			});
		
	</script>
	
</polymer-element>
